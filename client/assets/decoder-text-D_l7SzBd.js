import{r as l,j as h}from"./jsx-runtime-DexIYAB0.js";import{V as j}from"./visually-hidden-W3ID0zqx.js";import{u as M,c as G}from"./heading-DyI8Xui0.js";import{u as V}from"./use-spring-KDm3mUsa.js";async function E(e){return new Promise(t=>setTimeout(t,e))}const R="_text_1v07c_2",T="_glyph_1v07c_9",H="_value_1v07c_16",p={text:R,glyph:T,value:H},g=["A","B","C","D","E","F","G","H","I","J"],r={Glyph:"glyph",Value:"value"};function N(e,t,s){return e.map((i,a)=>{if(a<s)return{type:r.Value,value:i};if(s%1<.5){const n=Math.floor(Math.random()*g.length);return{type:r.Glyph,value:g[n]}}return{type:r.Glyph,value:t[a].value}})}const $=l.memo(({text:e,start:t=!0,delay:s=0,className:i,...a})=>{const n=l.useRef([{type:r.Glyph,value:""}]),d=l.useRef(),m=M(),y=V(0,{stiffness:8,damping:5});return l.useEffect(()=>{const x=d.current,c=e.split("");let _;const v=()=>{const o=n.current.map(u=>`<span class="${p[u.type]}">${u.value}</span>`);x.innerHTML=o.join("")},f=y.on("change",o=>{n.current=N(c,n.current,o),v()});return t&&!_&&!m&&(async()=>{await E(s),y.set(c.length)})(),m&&(n.current=c.map((o,u)=>({type:r.Value,value:c[u]})),v()),()=>{f==null||f()}},[y,m,t,s,e]),h.jsxs("span",{className:G(p.text,i),...a,children:[h.jsx(j,{className:p.label,children:e}),h.jsx("span",{"aria-hidden":!0,className:p.content,ref:d})]})});export{$ as D};
